## Exercise: Install the Data Migration Assistant
In this exercise, you will install the Data Migration Assistant. 

### Install the Data Migration Assistant

1. Click **Commands**, click **Ctrl+Alt+Delete**, and then login with the **Administrator** password **`Pa55w.rd`**.
1. Close the Server Manager window.
1. On the desktop, double-click **DataMigrationAssistant - Shortcut**.
1. In the **Microsoft Data Migration Assistant Setup** window, on the **Welcome to the Microsoft Data Migration Assistant Setup Wizard** page, click **Next**.
1. On the **End-User License Agreement** page, read the terms shown, and if you agree to these terms, select the **I accept the terms in the License Agreement** check box, and then click **Next**.
1. On the **Privacy Statement** page, click **Read Microsoft privacy statement online**.
1. In Internet Explorer, on the **Microsoft Privacy Statement** web page, read through this statement, and then close Internet Explorer.
1.  In the **Microsoft Data Migration Assistant Setup** window, click **Install**.
1.  On the **Completed the Microsoft Data Migration Assistant Setup Wizard** page, when the installation has finished, select the **Launch Microsoft Data Migration Assistant** check box, and then click **Finish**. The **Data Migration Assistant** launches.
1. If the **A new version is available** dialog box appears, click **Cancel**.
1. Leave the application open.

*This exercise is now complete. Please return to the Learn portal.*

---

## Exercise: Identify compatibility issues

In this exercise, you will run the DMA compatibility and performance assessments on a SQL Server 2008 database, and view the results for a SQL Server 2017 target.

### Start the DMA

If you logged out of the VM, start this exercise by logging on and starting the DMA:

1. Sign into the VM with your Microsoft account.
1. Click **Commands**, click **CTRL+ALT+DEL**, and then login with the **Administrator** password **`Pa55w.rd`**.
1. Close the **Server Manager** window.
1. On the **Desktop**, double-click **Microsoft Data Migration Assistant**.
1. If the **A new version is available** dialog box appears, click **Cancel**.

### Run the compatibility assessment

Continue by running the DMA and using it to assess the Adventure Works database:

1. On the left, click the **menu** icon to display the fly-out, and then click **+ New**.
1. In the **New** fly-out, leave the **Project type** as **Assessment**, and in the **Project name** box, type **`AdventureWorks 2008-2017`**.
1. Leave the **Source server type** as **SQL Server**, in the **Target server type** list, click **SQL Server**, and then click **Create**.
1. On the **Options** tab, ensure the **Select target version** list is set to **SQL Server 2017 on Windows**.
1. Select the **New features' recommendation** check box, and then click **Next**.
1. On the **Connect to a server** flyout, in the **Server name** box, type **`localhost`**.
1. Leave the **Authentication type** as **Windows Authentication**, clear the **Encrypt connection** check box, and then click **Connect**.
1. In the **Add sources** flyout, select the **AdventureWorks** check box, and then click **Add**.
1. On the **Select sources** tab, click **Start Assessment**.

On the **Review results** tab, when the assessment completes, the results are displayed.

### Review the assessment results

Now you can examine the recommendations generated by the DMA:

1. On the **Compatibility 140 (2)** tab, notice that the **Behavior changes** tab is highlighted, and lists two issues for review.
1. Under **Issue details**, read the **Recommendation** text.
1. On the right-hand side of the tab, look at the **Impacted objects** list.
1. Click the row containing **HumanResources**. Note the **Object details**.
1. Click the rows below, and note the **Object details** changes.
1. Under **Behavior changes**, click **SERVERPROPERTY('LCID') result...**. Read the **Impact** and **Recommendation** text. Notice under **Impacted objects** that the affected stored procedure **dbo.uspSearchCandidateResumes** is listed.

### Export the assessment results

To export the results into a flexible file format, follow these steps:

1. On the **Review results** tab, at the bottom of the page, click **Export report**.
1. In the **Save assessment report** dialog box, change the location to the **Desktop**.
1. In the **File name** box, type **`AdventureWorks 2008-2017`**.
1. In the **Save as type** list, click **CSV Files (*.csv)**, and then click **Save**.
1. Minimize the **Data Migration Assistant** window, and on the **Desktop**, double-click the **AdventureWorks 2008-2017.csv** file.
1. In the **How do you want to open this file?** dialog box, click **Notepad**, and then click **OK**.
1. Scroll through the list of issues and recommendations to view the full results from the assessment. When you are finished, close Notepad.

*This exercise is now complete. Please return to the Learn portal.*

---
## Exercise: Upgrade a database
In this exercise, you will upgrade a database from SQL Server 2008 R2, to SQL Server 2017. After the database has been migrated, you will export the results to CSV.

### Start the DMA

If you logged out of the VM, start by logging on and accessing the DMA:

1. Sign into the VM with your Microsoft account.
1. Click **Commands**, click **CTRL+ALT+DEL**, and then login with the **Administrator** password **`Pa55w.rd`**.
1. Close the Server Manager window.
1. On the **Desktop**, double-click **Microsoft Data Migration Assistant**.
1. If the **A new version is available** dialog box appears, click **Cancel**.

### Migrate a database

Next, use the DMA to migrate the database. Follow these steps:

1. On the taskbar, click File Explorer.
1. On the left, click **Local Disk (C:)**, then right click in the main pain and select **New**, then select **Folder**.
1. Rename the new folder, **temp**.
1. On the taskbar, select **Data Migration Assistant**.
1. On the left, click **+**.
1. In the **New** fly-out, under **Project type**, click **Migration** and then in the **Project name** box, type **`AdventureWorks 2008-2017`**.
1. Leave the **Source server type** as **SQL Server**, in the **Target server type** list, click **SQL Server**, and then click **Create**.
1. On the **Specify source & target** tab, under **Source server details**, in the **Server name** box, type **`localhost`**.
1. In the **Authentication type** list, ensure **Windows Authentication** is selected, and that **Encrypt connection** is clear.
1. Under **Target server details**, in the **Server name** box, type **`localhost`**.
1. In the **Authentication type** list, ensure **Windows Authentication** is selected, and that **Encrypt connection** is clear, and then click **Next**.
1. On the **Add databases** tab, under **Source server**, ensure only **AdventureWorks** is selected.
1. In the **Shared location accessible by source and target servers for backup operation** box, type **`C:\temp`**, and then click **Next**.

    >[!ALERT] Note that migrating a database on the same server and to the same location causes an error.

1. In the **Provide target database name** box, type **`AWMigrate2017`**.
1. In the **Restore options** section, change the **Data** path for **Restore as on target server** to:

    ```cmd
    C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\DATA\AWMigrate2017.mdf
    ```

1. Change the **Log** path for **Restore as on target server** to:

    ```cmd
    C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\DATA\AWMigrate2017_log.LDF
    ```

1. Click **Next**, on the **Select logins** tab, ensure no logins are selected, and then click **Start Migration**.

### Export the results

Next, export the results to a CSV text file:

1. When the migration completes, on the **View results** tab, click **Export report**.
1. In the **Save migration report** dialog box, change the location to the **Desktop**.
1. In the **File name** box, type **`AdventureWorks 2008-2017 Upgrade`**.
1. In the **Save as type** list, click **CSV Files (*.csv)**, and then click **Save**.
1. Minimize the **Data Migration Assistant** window.
1. On the **Desktop**, double-click the **AdventureWorks 2008-2017 Upgrade.csv** file.
1. In Notepad, scroll through the results of the export. Notice that the report includes a list of databases you chose not to migrate. Close Notepad.

### Check the current compatibility level

Before you make the upgrade, find out the original compatibility level for the database:

1. Click Start, type **`SSMS`**, and then press Enter.
1. In the **Connect to Server** dialog box, in the **Server name** box, type **`localhost`**, leave the **Authentication** selection as **Windows Authentication**, and then click **Connect**.
1. In Object Explorer, expand **Databases**, you should now see the migrated **AWMigrate2017** database. Right-click **AWMigrate2017**, and then click **Properties**.
1. In the **Database Properties - AWMigrate2017** window, under **Select a page**, click **Options**.
1. The **Compatibility level** should be set to **SQL Server 2008 (100)**, and then click **Cancel**.

### Update the compatibility level

Now you can upgrade the compatibility level for the Adventure Works database:

1. In Object Explorer, right-click **AWMigrate2017**, and then click **New Query**.
1. In the query window, type the following code, and then click **Execute**:

    ```sql
    ALTER DATABASE AWMigrate2017 
    SET COMPATIBILITY_LEVEL = 140
    ```

1. In Object Explorer, right-click **AWMigrate2017**, and then click **Properties**.
1. In the **Database Properties - AWMigrate2017** window, under **Select a page**, click **Options**.
1. The **Compatibility level** should now be set to **SQL Server 2017 (140)**, and then click **Cancel**.
1. Close SSMS, without saving any changes.

*This exercise is now complete. Please return to the Learn portal.*