---
metadata:
  title: Introduction to outputting data from Azure Digital Twins
  description: This unit introduces the types of events and data emitted by Azure Digital Twins
  ms.date: 11/30/2020
  author: raniabayoumy
  ms.author: rabayoum
  ms.topic: interactive-tutorial
  ms.prod: learning-azure
title: Introduction to outputting data from Azure Digital Twins
durationInMinutes: 6
---

In an Azure Digital Twins solution, you can route event notifications to downstream services or connected compute resources. This is done by first setting up endpoints that can receive the events. You can then create event routes that specify which events generated by Azure Digital Twins are delivered to which endpoints.

:::image type="content" source="../media/adt-tsi-flow.png" alt-text="The diagram illustrates the flow of data from Azure Digital Twins to Time Series Insights":::

There are many other services where you may want to ultimately direct your data, such as [Azure Storage](https://docs.microsoft.com/en-us/azure/storage/common/storage-introduction), [Azure Maps](https://docs.microsoft.com/en-us/azure/azure-maps/about-azure-maps), or [Time Series Insights](https://docs.microsoft.com/en-us/azure/time-series-insights/time-series-insights-update-overview) (TSI). To send your data to services like these, first you need to attach the destination service to an endpoint.

## How Event Routes work

Endpoints are attached to Azure Digital Twins using management APIs or the Azure portal. For more information on how to attach an endpoint to Azure Digital Twins, see the [guide for managing endpoints and routes](https://docs.microsoft.com/en-us/azure/digital-twins/how-to-manage-routes-apis-cli).

- Event routes use [Event Hub](https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-about), [Event Grid](https://docs.microsoft.com/en-us/azure/event-grid/overview), or [Service Bus](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-messaging-overview) to drive your desired data flows
- All events incoming to ADT or generated by ADT flow into a common event stream
- Developers can define routes to pick a subset of data items of the event stream and send them to endpoints

In this module we'll learn how to route events to Time Series Insights for querying and visualizing events received form Azure Digital Twins.

## What is Time Series Insights

[Azure Time Series Insights](https://azure.microsoft.com/en-us/services/time-series-insights/) is an analytics platform to monitor, analyze, and visualize your industrial IoT data at scale. It also enables simple windowed compute in operational contexts to answer root-cause-analysis-type questions where operators and developers need more than last-known-values using real-time or near real-time insights from analytics to achieve operational optimization and excellence. For more information on TSI, see the [Time Series Insights Documentation](https://docs.microsoft.com/en-us/azure/time-series-insights/time-series-insights-overview) or the [Time Series Insights Learn module to explore and analyze time-stamped data](https://docs.microsoft.com/en-us/learn/modules/explore-analyze-time-series-insights/).

## Azure Digital Twins emitted events

In many cases, data from Azure Digital Twins (ADT) needs to be sent to downstream services for further analysis, integration, simulation, or processing. In this example, we'll explore how to send the data to a Time Series Insights (TSI) instance to record time series data of manufacturing process events for bulk analytics.

Data egress is handled using Event Routes. An event route lets you send event data (such as telemetry events, life cycle events and property change events) from twins to defined endpoints in your subscriptions (such as an Event Hub, an Event Grid or a Service Bus).

ADT will emit the following events (notifications and telemetry messages) and they will be routed to custom endpoints:

- Digital Twin Change Notification
- Digital Twin Lifecycle Notification
- Digital Twin Relationship Change Notification
- Digital Twin Telemetry Messages

| Notification type                    | Routing source name   | Generated from...  |
|--------------------------------------|-----------------------|--------------------|
| Digital Twin Change Notification     | Digital Twin Change Notification | Any digital twin property change |
| Digital Twin Lifecycle Notification  | Digital Twin Lifecycle Notification | Any digital twin create or delete operation |
| Digital Twin Relationship Change Notification  | Digital Twin Relationship Change Notification  | Any digital twin relationship change |
| Digital Twin Telemetry Messages      | Telemetry Messages        | Any telemetry message |

For more information about the different notification types, see [the ADT event data article](https://docs.microsoft.com/en-us/azure/digital-twins/how-to-interpret-event-data).

## Endpoints

To define an event route, developers first must define **endpoints**. An endpoint is a connection to a destination outside of ADT. Supported destinations are:

- EventGrid
- EventHub
- ServiceBus

For an example of the flow of event data through a larger IoT solution with an Azure Digital Twins aspect, see the following diagram:

:::image type="content" source="../media/adt-event-data-flow.png" alt-text="The diagram illustrates the flow of event data through a larger IoT solution with an Azure Digital Twins aspect":::

## Routes

**Event routes** are defined using data plane APIs. A route definition contains:

- The desired route ID
- The desired endpoint ID
- A filter that defines which events are sent to the endpoint

Some of the services you can tap into using routes:

- Storing Azure Digital Twins data in Azure Data Lake
- Analyzing Azure Digital Twins data with Azure Synapse Analytics, or other Microsoft data analytics tools
- Integrating larger workflows with Logic Apps
- Connecting Azure Digital Twins to Time Series Insights to track the time series history of each twin
- Aligning a Time Series Model in Time Series Insights with a source in Azure Digital Twins
- Route events to compute services like Azure Functions for advanced simulation or data processing
