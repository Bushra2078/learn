Should there be 2 units here or do we need to add an extra unit? 1 - describe, 2nd plan?
## Describe the baseline process

Your sensor is now fine tuned and almost fully operational. The final stage is to create a baseline of alerts so that Microsoft Defender for IoT understands the normal type of traffic flow through your system. This way Defender for IoT is able to identify which traffic is most dangerous or suspicious and produces accurate alerts. This *learning* process can take several weeks as you redefine any incorrect alerts that Defender for IoT has flagged.

Once the learning process is complete, Defender for IoT will have created an accurate baseline of alerts to work from and protect your devices. It is still possible that you will have to add new alerts but this will not occcur on such a regular basis as in this initial period.

## OT sensor learning mode

The following diagram shows the complete OT deployment path, with the team responsible for each phase:

:::image type="content" source="../media/2-ot-deploy.png" alt-text="Diagram of the complete OT deployment process" border="false":::

This module describes the sixth and final phase in the deployment: *Baseline learning ends*. In a real-life scenario, the deployment and connectivity teams ensure that the sensor is already activated, sending data to Defender for IoT, and is fine-tuned.

The sensor baseline learning is the phase where Defender for IoT identifies suscpicious or harmful traffic and creates a list of alerts for each of them. When this traffic is identified in the future, alerts are sent to Defender for IoT, and you are able to contain and protect your devices. You must monitor these alerts and in some cases adjust them to be more accurate. This process can take anywhere from a few days to several weeks, depending on the complexity and size of your network.

## In this phase

### Triage alerts

Once the sensor is set up and sends data, Defender for IoT starts to idenify normal and irregular traffic flow within the network. This state is called the learning mode, where Defender for IoT identifies regular activity, such as regular file transfers or data flows between devices. This regular activity is logged and will not trigger an alert in the future. Any traffic in the network that does not match these will trigger an alert.

The new alerts that are sent to Defender for IoT must be checked and in some cases you will need to adjust their status. This way Defender for IoT learns which alerts are real cases of harmful traffic and which are unsuspicious and can be added to the baseline. The learning process can take several weeks to complete.

### End the learning mode

The learning mode will turn off when the sensor detects a decrease in the number of new alerts produced, which is typically 2-6 weeks after deployment. You can also turn off the learning mode manually when you feel that the alerts accurately reflect your network activity.

As new alerts are detected in the future, they can be set, individually, to learning mode, and then included in a new baseline once the sensor correctly identifies them. This ensures that your baseline of alerts is up to date, doesn't miss new types of suspicious traffic and keeps your network and devices safe.

# Plan the baseline

Your car manufacturing organization has offices and production sites across the globe, with a network linking them together. A sensor was onboarded to Defender for IoT and deployed to the sensor. Now your task is to set up the alert baseline to ensure that alerts ignore normal traffic with in the system and only report on suspicious activity.

## Triage your alerts

In Defender for IoT, select the Alerts page. This lists all of the alerts generated by the sensor. There are 4 severities of alerts that are assigned by the sensor, which can be modified. They are: *Critical, Major, Minor, Warning*. Alerts also have a status of *New, Active, Closed*.

## Filter the alerts

The list of alerts can be filtered by any parameter or mix of parameters you want to apply. The list can then sorted using Group by as well.  

From the list of alerts, either select a specific alert or several alerts, and the details will appear in the alert pane, including the alert description, traffic source and destination and more.

Alerts can either be analyzed in a map view or the event timeline view.

The Map View shows the source and destination devices for an alert as well as other devices connected to your sensor. For example:

:::image type="content" source="../media/5-map-view.png" alt-text="Screenshot of the Map View tab on an alert details page":::

The Event Timeline View shows the alert event together in a list with other recent activity. This allows you to get a better insight into what the network was doing before and after this alert occurred. .....( How is this useful? What do I learn from seeing the other events?). For example:

:::image type="content" source="../media/5-event-timeline-alert-sensor.png" alt-text="Screenshot of an event timeline on an alert details page":::

Analyze the details of the alert, and update the status or other settings as needed. Alerts can have 5<!--4? --> different statuses.
<!--Do we go over ther rules first or the alerts?? - I think , it is alerts only, as this is referring to the initial set up. How much of the alert status table should be included here? Only the info relevant to the Azure portal. -->

|Status / triage action   |Description  |
|---------|---------|---------|
|**New**     |     *New* alerts are alerts that haven't yet been triaged or investigated by the team. New traffic detected for the same devices doesn't generate a new alert, but is added to the existing alert.   |
|**Active**     |     Set an alert to *Active* to indicate that an investigation is underway, but that the alert can't yet be closed or otherwise triaged. <br><br>This status has no effect elsewhere in Defender for IoT.      |
|**Closed**     | Close an alert to indicate that it's fully investigated, and you want to be alerted again the next time the same traffic is detected.<br><br>Closing an alert adds it to the sensor event timeline.  |
|**Learn**     |    Learn an alert when you want to close it and add it as allowed traffic, so that you aren't alerted again the next time the same traffic is detected. <br><br>For example, when the sensor detects firmware version changes following standard maintenance procedures, or when a new, expected device is added to the network. <br><br>Learning an alert closes the alert and adds an item to the sensor event timeline. Detected traffic is included in data mining reports, but not when calculating other OT sensor reports. <br><br>Learning alerts is available for selected alerts only, mostly those triggered by *Policy* and *Anomaly* engine alerts. |

<!-- what to do with this, it is not available on D4IoT portal? 
|**Mute**     |  - OT network sensors <br><br>- On-premises management console      <br><br>*Unmuting* an alert is available only on the OT sensor.  |  Mute an alert when you want to close it and not see again for the same traffic, but without adding the alert allowed traffic. <br><br>For example, when the Operational engine triggers an alert indicating that the PLC Mode was changed on a device. The new mode might indicate that the PLC isn't secure, but after investigation, it's determined that the new mode is acceptable. <br><br>Muting an alert closes it, but doesn't add an item to the sensor event timeline. Detected traffic is included in data mining reports, but not when calculating data for other sensor reports. <br><br>Muting an alert is available for selected alerts only, mostly those triggered by the *Anomaly*, *Protocol Violation*, or *Operational* engines.  |-->

In the Alerts page, select an critical Alert, ..... The details display in the pane, where changes are made to the alert. Then save the new alert status.

You can also analyze the PCAP files of the raw data for the alert. These are accessed in the .....and should then be downloaded and analyzed using a PCAP reader -do we really need to go over this? Seems to be too much to detail!

A comment can be added to the alert to leave important messages for other team members, document important information about the alert or make decisions.

Other changes can be made to ports and VLAN names, marking an ICS subnet and configuring DHCP address ranges.

Changes are saved and the baseline alerts will be updated accordingly. As this process continues, you will notice a decrease in the number of new alerts as the sensor learns the normal flow of traffic in your system.

Eventually, the sensor will automatically change from Learning mode to Operational mode when it detects a low level of new alerts. Alternatively, if you think the sensor is properly set up you can manually change to Operational mode. After this you will still recieve new alerts, and must check and triage them as well. Some will need to be assigned as Learn and even though the sensor is not in the Learning mode, new alerts can be added to the baseline to keep the sensor up to date of new threats to your system.

<!-- A nice definition. may use it more.
Baseline - creates an environmental baseline for the normal communication behaviour of devices in your network is known. going forward, anything that is unseen traffic will create an alert to be followed up with.
-->
<!-- from videos i have watched, they make a report first and then use that to go through alerts, but in our documentation it just goes through alerts which should be triaged. So just wondering about that difference!! Ask Theo when he is in touch today . I will write based on the internal documentation, not MSFT videos, etc. -->

<!-- generally I find that links go to various places, all over documentation, and are hard to know where or why you are now in a different section -->