trigger:
  batch: true
  branches:
    include:
    - main
  paths:
    include:
    - 'template-specs/linux-app-service/**'

variables: 
- name: ServiceConnectionName
  value: ToyReusable
- name: AzureResourceGroupName
  value: ToyReusable
- name: AzureRegion
  value: westus3
- name: TemplateSpecName
  value: linux-app-service
- name: TemplateSpecFilePath
  value: template-specs/linux-app-service/main.bicep

pool:
  vmImage: ubuntu-latest

stages:
  # To be added.


#jobs:
#  lint:
#    runs-on: ubuntu-latest
#    steps:
#    - uses: actions/checkout@v2
#    - name: Run Bicep linter
#      run: az bicep build --file ${{ env.TEMPLATE_SPEC_FILE_PATH }}
#
#  publish:
#    runs-on: ubuntu-latest
#    needs: [ lint ]
#    steps:
#    - uses: actions/checkout@v2
#    - uses: azure/login@v1
#      name: Sign in to Azure
#      with:
#        creds: ${{ secrets.AZURE_CREDENTIALS }}
#    - uses: azure/cli@v1
#      name: Publish template spec
#      with:
#        inlineScript: |
#          az ts create \
#            --resource-group ${{ env.AZURE_RESOURCEGROUP_NAME }} \
#            --name ${{ env.TEMPLATE_SPEC_NAME }} \
#            --version ${{ github.run_number }} \
#            --template-file ${{ env.TEMPLATE_SPEC_FILE_PATH }} \
#            --location ${{ env.AZURE_REGION }} \
#            --yes
