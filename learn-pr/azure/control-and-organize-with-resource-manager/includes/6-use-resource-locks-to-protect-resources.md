Use resource locks to protect resources