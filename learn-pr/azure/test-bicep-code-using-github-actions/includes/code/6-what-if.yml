jobs:
  preview:
     runs-on: ubuntu-latest
     needs: [lint, validate]
     steps: 
     - uses: azure/login@v1
       name: Sign in to Azure
       with:
         creds: ${{ secrets.AZURE_CREDENTIALS }}
     - uses: Azure/cli@v1
       name: Run what-if
       with:
         inlineScript: |
             az deployment group what-if \
               --resource-group ${{ env.AZURE_RESOURCEGROUP_NAME }} \
               --template-file deploy/main.bicep \
               --parameters environmentType=${{ env.ENVIRONMENT_TYPE }}
