Azure Cosmos DB for PostgreSQL is uniquely positioned to host multitenant software as a service (SaaS) applications at any scale. SaaS application providers can start small with a single-node database and, if necessary, horizontally scale the database to a multi-node model that's capable of hosting millions of tenants. You can accomplish this transition with minimal application disruption and without rearchitecting the SaaS application. It also allows SaaS application developers to continue using familiar relational semantics in PostgreSQL, like joins, foreign key constraints, and transactions.

This module examines the concepts and considerations to account for when you develop, manag, and monitor multitenant SaaS applications by using Azure Cosmos DB for PostgreSQL. You can create powerful distributed multitenant databases by understanding multitenant data architectures and by using tenant IDs and tenant-level monitoring.

## Scenario: Horizontally scale an Azure Cosmos DB for PostgreSQL multitenant database with minimal disruption

In this scenario, you were recently hired as the lead data architect for Tailspin Toys. You've been put in charge of maintaining the multitenant database behind the Tailspin Toys SaaS platform, which hosts websites for boutique toy stores worldwide. The Tailspin Toys SaaS application provides tools that toy stores of all sizes can use to build, host, and manage online storefronts to sell their products.

Tailspin Toys has been successfully running the database as a single-node instance of Azure Cosmos DB for PostgreSQL. But recently, after a successful marketing campaign, the number of stores that host their websites in the application increased. With this increase in the number of tenants, they have begun noticing degraded query performance and slower response times, which they believe are caused by some of the larger stores with more customer traffic consuming more resources than other smaller stores.

They've asked you to monitor the database to determine which stores consume the most resources. They would like you to use this information to implement a solution to isolate larger stores and better utilize database resources evenly across all stores. Tailspin Toys has also requested that any changes you make to the database have a minimal impact on the application.

To address this issue, you've decided to scale the database horizontally by transitioning to a multi-node instance of Azure Cosmos DB for PostgreSQL. By moving to a multi-node instance, you can parallelize workloads by transforming SQL queries, and then distributing them across multiple nodes. Then, you'll monitor the database to identify the stores that have the highest traffic. To provide consistent performance for all tenants, you'll isolate some of the larger stores on dedicated nodes.
