> [!NOTE]
> You can find an interactive version of this unit named **bike-sharing-in-the-bay-area.ipynb** in your virtual environment

If you haven't set up your online Visual Studio Code environment for the Learning Path "Foundations of Data Science", please refer to the first unit **Setup**

Open <a href = "https://online.visualstudio.com/environments" target="_blank" rel="noopener">Visual Studio Codespaces</a>


``` {.python}
from datascience import *
%matplotlib inline
path_data = '../../../../data/'
import matplotlib.pyplot as plt
plt.style.use('fivethirtyeight')
import math
from scipy import stats
import numpy as np
```

We end this chapter by using all the methods we have learned to examine
a new and large dataset. We will also introduce `map_table`, a powerful
visualization tool.

The [Bay Area Bike Share](http://www.bayareabikeshare.com/) service
published a [dataset](http://www.bayareabikeshare.com/open-data)
describing every bicycle rental from September 2014 to August 2015 in
their system. There were 354,152 rentals in all. The columns are:

-   An ID for the rental
-   Duration of the rental, in seconds
-   Start date
-   Name of the Start Station and code for Start Terminal
-   Name of the End Station and code for End Terminal
-   A serial number for the bike
-   Subscriber type and zip code

``` {.python}
trips = Table.read_table(path_data + 'trip.csv')
trips
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
Trip ID
</th>
<th>
Duration
</th>
<th>
Start Date
</th>
<th>
Start Station
</th>
<th>
Start Terminal
</th>
<th>
End Date
</th>
<th>
End Station
</th>
<th>
End Terminal
</th>
<th>
Bike \#
</th>
<th>
Subscriber Type
</th>
<th>
Zip Code
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
913460
</td>
<td>
765
</td>
<td>
8/31/2015 23:26
</td>
<td>
Harry Bridges Plaza (Ferry Building)
</td>
<td>
50
</td>
<td>
8/31/2015 23:39
</td>
<td>
San Francisco Caltrain (Townsend at 4th)
</td>
<td>
70
</td>
<td>
288
</td>
<td>
Subscriber
</td>
<td>
2139
</td>
</tr>
<tr>
<td>
913459
</td>
<td>
1036
</td>
<td>
8/31/2015 23:11
</td>
<td>
San Antonio Shopping Center
</td>
<td>
31
</td>
<td>
8/31/2015 23:28
</td>
<td>
Mountain View City Hall
</td>
<td>
27
</td>
<td>
35
</td>
<td>
Subscriber
</td>
<td>
95032
</td>
</tr>
<tr>
<td>
913455
</td>
<td>
307
</td>
<td>
8/31/2015 23:13
</td>
<td>
Post at Kearny
</td>
<td>
47
</td>
<td>
8/31/2015 23:18
</td>
<td>
2nd at South Park
</td>
<td>
64
</td>
<td>
468
</td>
<td>
Subscriber
</td>
<td>
94107
</td>
</tr>
<tr>
<td>
913454
</td>
<td>
409
</td>
<td>
8/31/2015 23:10
</td>
<td>
San Jose City Hall
</td>
<td>
10
</td>
<td>
8/31/2015 23:17
</td>
<td>
San Salvador at 1st
</td>
<td>
8
</td>
<td>
68
</td>
<td>
Subscriber
</td>
<td>
95113
</td>
</tr>
<tr>
<td>
913453
</td>
<td>
789
</td>
<td>
8/31/2015 23:09
</td>
<td>
Embarcadero at Folsom
</td>
<td>
51
</td>
<td>
8/31/2015 23:22
</td>
<td>
Embarcadero at Sansome
</td>
<td>
60
</td>
<td>
487
</td>
<td>
Customer
</td>
<td>
9069
</td>
</tr>
<tr>
<td>
913452
</td>
<td>
293
</td>
<td>
8/31/2015 23:07
</td>
<td>
Yerba Buena Center of the Arts (3rd @ Howard)
</td>
<td>
68
</td>
<td>
8/31/2015 23:12
</td>
<td>
San Francisco Caltrain (Townsend at 4th)
</td>
<td>
70
</td>
<td>
538
</td>
<td>
Subscriber
</td>
<td>
94118
</td>
</tr>
<tr>
<td>
913451
</td>
<td>
896
</td>
<td>
8/31/2015 23:07
</td>
<td>
Embarcadero at Folsom
</td>
<td>
51
</td>
<td>
8/31/2015 23:22
</td>
<td>
Embarcadero at Sansome
</td>
<td>
60
</td>
<td>
363
</td>
<td>
Customer
</td>
<td>
92562
</td>
</tr>
<tr>
<td>
913450
</td>
<td>
255
</td>
<td>
8/31/2015 22:16
</td>
<td>
Embarcadero at Sansome
</td>
<td>
60
</td>
<td>
8/31/2015 22:20
</td>
<td>
Steuart at Market
</td>
<td>
74
</td>
<td>
470
</td>
<td>
Subscriber
</td>
<td>
94111
</td>
</tr>
<tr>
<td>
913449
</td>
<td>
126
</td>
<td>
8/31/2015 22:12
</td>
<td>
Beale at Market
</td>
<td>
56
</td>
<td>
8/31/2015 22:15
</td>
<td>
Temporary Transbay Terminal (Howard at Beale)
</td>
<td>
55
</td>
<td>
439
</td>
<td>
Subscriber
</td>
<td>
94130
</td>
</tr>
<tr>
<td>
913448
</td>
<td>
932
</td>
<td>
8/31/2015 21:57
</td>
<td>
Post at Kearny
</td>
<td>
47
</td>
<td>
8/31/2015 22:12
</td>
<td>
South Van Ness at Market
</td>
<td>
66
</td>
<td>
472
</td>
<td>
Subscriber
</td>
<td>
94702
</td>
</tr>
</tbody>
</table>
<p>
... (354142 rows omitted)
</p>
We'll focus only on the *free trips*, which are trips that last less
than 1800 seconds (half an hour). There is a charge for longer trips.

The histogram below shows that most of the trips took around 10 minutes
(600 seconds) or so. Very few took near 30 minutes (1800 seconds),
possibly because people try to return the bikes before the cutoff time
so as not to have to pay.

``` {.python}
commute = trips.where('Duration', are.below(1800))
commute.hist('Duration', unit='Second')
```

/home/choldgraf/anaconda/envs/dev/lib/python3.6/site-packages/matplotlib/axes/\_axes.py:6462:
UserWarning: The 'normed' kwarg is deprecated, and has been replaced by
the 'density' kwarg. warnings.warn("The 'normed' kwarg is deprecated,
and has been"

![png](../media/36-bike-sharing-in-the-bay-area-4-1.png)

We can get more detail by specifying a larger number of bins. But the
overall shape doesn't change much.

``` {.python}
commute.hist('Duration', bins=60, unit='Second')
```

/home/choldgraf/anaconda/envs/dev/lib/python3.6/site-packages/matplotlib/axes/\_axes.py:6462:
UserWarning: The 'normed' kwarg is deprecated, and has been replaced by
the 'density' kwarg. warnings.warn("The 'normed' kwarg is deprecated,
and has been"

![png](../media/36-bike-sharing-in-the-bay-area-6-1.png)

### Exploring the Data with `group` and `pivot`

We can use `group` to identify the most highly used Start Station:

``` {.python}
starts = commute.group('Start Station').sort('count', descending=True)
starts
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
Start Station
</th>
<th>
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
San Francisco Caltrain (Townsend at 4th)
</td>
<td>
25858
</td>
</tr>
<tr>
<td>
San Francisco Caltrain 2 (330 Townsend)
</td>
<td>
21523
</td>
</tr>
<tr>
<td>
Harry Bridges Plaza (Ferry Building)
</td>
<td>
15543
</td>
</tr>
<tr>
<td>
Temporary Transbay Terminal (Howard at Beale)
</td>
<td>
14298
</td>
</tr>
<tr>
<td>
2nd at Townsend
</td>
<td>
13674
</td>
</tr>
<tr>
<td>
Townsend at 7th
</td>
<td>
13579
</td>
</tr>
<tr>
<td>
Steuart at Market
</td>
<td>
13215
</td>
</tr>
<tr>
<td>
Embarcadero at Sansome
</td>
<td>
12842
</td>
</tr>
<tr>
<td>
Market at 10th
</td>
<td>
11523
</td>
</tr>
<tr>
<td>
Market at Sansome
</td>
<td>
11023
</td>
</tr>
</tbody>
</table>
<p>
... (60 rows omitted)
</p>
The largest number of trips started at the Caltrain Station on Townsend
and 4th in San Francisco. People take the train into the city, and then
use a shared bike to get to their next destination.

The `group` method can also be used to classify the rentals by both
Start Station and End Station.

``` {.python}
commute.group(['Start Station', 'End Station'])
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
Start Station
</th>
<th>
End Station
</th>
<th>
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
2nd at Folsom
</td>
<td>
2nd at Folsom
</td>
<td>
54
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
2nd at South Park
</td>
<td>
295
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
2nd at Townsend
</td>
<td>
437
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
5th at Howard
</td>
<td>
113
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Beale at Market
</td>
<td>
127
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Broadway St at Battery St
</td>
<td>
67
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Civic Center BART (7th at Market)
</td>
<td>
47
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Clay at Battery
</td>
<td>
240
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Commercial at Montgomery
</td>
<td>
128
</td>
</tr>
<tr>
<td>
2nd at Folsom
</td>
<td>
Davis at Jackson
</td>
<td>
28
</td>
</tr>
</tbody>
</table>
<p>
... (1619 rows omitted)
</p>
Fifty-four trips both started and ended at the station on 2nd at Folsom.
A much large number (437) were between 2nd at Folsom and 2nd at
Townsend.

The `pivot` method does the same classification but displays its results
in a contingency table that shows all possible combinations of Start and
End Stations, even though some of them didn't correspond to any trips.
Remember that the first argument of a `pivot` statement specifies the
column labels of the pivot table; the second argument labels the rows.

There is a train station as well as a Bay Area Rapid Transit (BART)
station near Beale at Market, explaining the high number of trips that
start and end there.

``` {.python}
commute.pivot('Start Station', 'End Station')
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
End Station
</th>
<th>
2nd at Folsom
</th>
<th>
2nd at South Park
</th>
<th>
2nd at Townsend
</th>
<th>
5th at Howard
</th>
<th>
Adobe on Almaden
</th>
<th>
Arena Green / SAP Center
</th>
<th>
Beale at Market
</th>
<th>
Broadway St at Battery St
</th>
<th>
California Ave Caltrain Station
</th>
<th>
Castro Street and El Camino Real
</th>
<th>
Civic Center BART (7th at Market)
</th>
<th>
Clay at Battery
</th>
<th>
Commercial at Montgomery
</th>
<th>
Cowper at University
</th>
<th>
Davis at Jackson
</th>
<th>
Embarcadero at Bryant
</th>
<th>
Embarcadero at Folsom
</th>
<th>
Embarcadero at Sansome
</th>
<th>
Embarcadero at Vallejo
</th>
<th>
Evelyn Park and Ride
</th>
<th>
Franklin at Maple
</th>
<th>
Golden Gate at Polk
</th>
<th>
Grant Avenue at Columbus Avenue
</th>
<th>
Harry Bridges Plaza (Ferry Building)
</th>
<th>
Howard at 2nd
</th>
<th>
Japantown
</th>
<th>
MLK Library
</th>
<th>
Market at 10th
</th>
<th>
Market at 4th
</th>
<th>
Market at Sansome
</th>
<th>
Mechanics Plaza (Market at Battery)
</th>
<th>
Mezes Park
</th>
<th>
Mountain View Caltrain Station
</th>
<th>
Mountain View City Hall
</th>
<th>
Palo Alto Caltrain Station
</th>
<th>
Park at Olive
</th>
<th>
Paseo de San Antonio
</th>
<th>
Post at Kearny
</th>
<th>
Powell Street BART
</th>
<th>
Powell at Post (Union Square)
</th>
<th>
Redwood City Caltrain Station
</th>
<th>
Redwood City Medical Center
</th>
<th>
Redwood City Public Library
</th>
<th>
Rengstorff Avenue / California Street
</th>
<th>
Ryland Park
</th>
<th>
SJSU - San Salvador at 9th
</th>
<th>
SJSU 4th at San Carlos
</th>
<th>
San Antonio Caltrain Station
</th>
<th>
San Antonio Shopping Center
</th>
<th>
San Francisco Caltrain (Townsend at 4th)
</th>
<th>
San Francisco Caltrain 2 (330 Townsend)
</th>
<th>
San Francisco City Hall
</th>
<th>
San Jose City Hall
</th>
<th>
San Jose Civic Center
</th>
<th>
San Jose Diridon Caltrain Station
</th>
<th>
San Mateo County Center
</th>
<th>
San Pedro Square
</th>
<th>
San Salvador at 1st
</th>
<th>
Santa Clara County Civic Center
</th>
<th>
Santa Clara at Almaden
</th>
<th>
South Van Ness at Market
</th>
<th>
Spear at Folsom
</th>
<th>
St James Park
</th>
<th>
Stanford in Redwood City
</th>
<th>
Steuart at Market
</th>
<th>
Temporary Transbay Terminal (Howard at Beale)
</th>
<th>
Townsend at 7th
</th>
<th>
University and Emerson
</th>
<th>
Washington at Kearny
</th>
<th>
Yerba Buena Center of the Arts (3rd @ Howard)
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
2nd at Folsom
</td>
<td>
54
</td>
<td>
190
</td>
<td>
554
</td>
<td>
107
</td>
<td>
0
</td>
<td>
0
</td>
<td>
40
</td>
<td>
21
</td>
<td>
0
</td>
<td>
0
</td>
<td>
44
</td>
<td>
78
</td>
<td>
54
</td>
<td>
0
</td>
<td>
9
</td>
<td>
77
</td>
<td>
32
</td>
<td>
41
</td>
<td>
14
</td>
<td>
0
</td>
<td>
0
</td>
<td>
11
</td>
<td>
30
</td>
<td>
416
</td>
<td>
53
</td>
<td>
0
</td>
<td>
0
</td>
<td>
169
</td>
<td>
114
</td>
<td>
302
</td>
<td>
33
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
60
</td>
<td>
121
</td>
<td>
88
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
694
</td>
<td>
445
</td>
<td>
21
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
38
</td>
<td>
57
</td>
<td>
0
</td>
<td>
0
</td>
<td>
39
</td>
<td>
237
</td>
<td>
342
</td>
<td>
0
</td>
<td>
17
</td>
<td>
31
</td>
</tr>
<tr>
<td>
2nd at South Park
</td>
<td>
295
</td>
<td>
164
</td>
<td>
71
</td>
<td>
180
</td>
<td>
0
</td>
<td>
0
</td>
<td>
208
</td>
<td>
85
</td>
<td>
0
</td>
<td>
0
</td>
<td>
112
</td>
<td>
87
</td>
<td>
160
</td>
<td>
0
</td>
<td>
37
</td>
<td>
56
</td>
<td>
178
</td>
<td>
83
</td>
<td>
116
</td>
<td>
0
</td>
<td>
0
</td>
<td>
57
</td>
<td>
73
</td>
<td>
574
</td>
<td>
500
</td>
<td>
0
</td>
<td>
0
</td>
<td>
139
</td>
<td>
199
</td>
<td>
1633
</td>
<td>
119
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
299
</td>
<td>
84
</td>
<td>
113
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
559
</td>
<td>
480
</td>
<td>
48
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
66
</td>
<td>
152
</td>
<td>
0
</td>
<td>
0
</td>
<td>
374
</td>
<td>
429
</td>
<td>
143
</td>
<td>
0
</td>
<td>
63
</td>
<td>
209
</td>
</tr>
<tr>
<td>
2nd at Townsend
</td>
<td>
437
</td>
<td>
151
</td>
<td>
185
</td>
<td>
92
</td>
<td>
0
</td>
<td>
0
</td>
<td>
608
</td>
<td>
350
</td>
<td>
0
</td>
<td>
0
</td>
<td>
80
</td>
<td>
329
</td>
<td>
168
</td>
<td>
0
</td>
<td>
386
</td>
<td>
361
</td>
<td>
658
</td>
<td>
506
</td>
<td>
254
</td>
<td>
0
</td>
<td>
0
</td>
<td>
27
</td>
<td>
315
</td>
<td>
2607
</td>
<td>
295
</td>
<td>
0
</td>
<td>
0
</td>
<td>
110
</td>
<td>
225
</td>
<td>
845
</td>
<td>
177
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
120
</td>
<td>
100
</td>
<td>
141
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
905
</td>
<td>
299
</td>
<td>
14
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
72
</td>
<td>
508
</td>
<td>
0
</td>
<td>
0
</td>
<td>
2349
</td>
<td>
784
</td>
<td>
417
</td>
<td>
0
</td>
<td>
57
</td>
<td>
166
</td>
</tr>
<tr>
<td>
5th at Howard
</td>
<td>
113
</td>
<td>
177
</td>
<td>
148
</td>
<td>
83
</td>
<td>
0
</td>
<td>
0
</td>
<td>
59
</td>
<td>
130
</td>
<td>
0
</td>
<td>
0
</td>
<td>
203
</td>
<td>
76
</td>
<td>
129
</td>
<td>
0
</td>
<td>
30
</td>
<td>
57
</td>
<td>
49
</td>
<td>
166
</td>
<td>
54
</td>
<td>
0
</td>
<td>
0
</td>
<td>
85
</td>
<td>
78
</td>
<td>
371
</td>
<td>
478
</td>
<td>
0
</td>
<td>
0
</td>
<td>
303
</td>
<td>
158
</td>
<td>
168
</td>
<td>
90
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
93
</td>
<td>
183
</td>
<td>
169
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
690
</td>
<td>
1859
</td>
<td>
48
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
116
</td>
<td>
102
</td>
<td>
0
</td>
<td>
0
</td>
<td>
182
</td>
<td>
750
</td>
<td>
200
</td>
<td>
0
</td>
<td>
43
</td>
<td>
267
</td>
</tr>
<tr>
<td>
Adobe on Almaden
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
11
</td>
<td>
4
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
17
</td>
<td>
7
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
25
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
7
</td>
<td>
7
</td>
<td>
16
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
19
</td>
<td>
23
</td>
<td>
265
</td>
<td>
0
</td>
<td>
20
</td>
<td>
4
</td>
<td>
5
</td>
<td>
10
</td>
<td>
0
</td>
<td>
0
</td>
<td>
14
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Arena Green / SAP Center
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
7
</td>
<td>
64
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
16
</td>
<td>
5
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
21
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
24
</td>
<td>
3
</td>
<td>
7
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
6
</td>
<td>
20
</td>
<td>
7
</td>
<td>
0
</td>
<td>
56
</td>
<td>
12
</td>
<td>
38
</td>
<td>
259
</td>
<td>
0
</td>
<td>
0
</td>
<td>
13
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Beale at Market
</td>
<td>
127
</td>
<td>
79
</td>
<td>
183
</td>
<td>
59
</td>
<td>
0
</td>
<td>
0
</td>
<td>
59
</td>
<td>
661
</td>
<td>
0
</td>
<td>
0
</td>
<td>
201
</td>
<td>
75
</td>
<td>
101
</td>
<td>
0
</td>
<td>
247
</td>
<td>
178
</td>
<td>
38
</td>
<td>
590
</td>
<td>
165
</td>
<td>
0
</td>
<td>
0
</td>
<td>
54
</td>
<td>
435
</td>
<td>
57
</td>
<td>
72
</td>
<td>
0
</td>
<td>
0
</td>
<td>
286
</td>
<td>
236
</td>
<td>
163
</td>
<td>
26
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
49
</td>
<td>
227
</td>
<td>
179
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
640
</td>
<td>
269
</td>
<td>
25
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
243
</td>
<td>
128
</td>
<td>
0
</td>
<td>
0
</td>
<td>
16
</td>
<td>
167
</td>
<td>
35
</td>
<td>
0
</td>
<td>
64
</td>
<td>
45
</td>
</tr>
<tr>
<td>
Broadway St at Battery St
</td>
<td>
67
</td>
<td>
89
</td>
<td>
279
</td>
<td>
119
</td>
<td>
0
</td>
<td>
0
</td>
<td>
1022
</td>
<td>
110
</td>
<td>
0
</td>
<td>
0
</td>
<td>
62
</td>
<td>
283
</td>
<td>
226
</td>
<td>
0
</td>
<td>
191
</td>
<td>
198
</td>
<td>
79
</td>
<td>
231
</td>
<td>
35
</td>
<td>
0
</td>
<td>
0
</td>
<td>
5
</td>
<td>
70
</td>
<td>
168
</td>
<td>
49
</td>
<td>
0
</td>
<td>
0
</td>
<td>
32
</td>
<td>
97
</td>
<td>
341
</td>
<td>
214
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
169
</td>
<td>
71
</td>
<td>
218
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
685
</td>
<td>
438
</td>
<td>
7
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
18
</td>
<td>
106
</td>
<td>
0
</td>
<td>
0
</td>
<td>
344
</td>
<td>
748
</td>
<td>
50
</td>
<td>
0
</td>
<td>
79
</td>
<td>
47
</td>
</tr>
<tr>
<td>
California Ave Caltrain Station
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
38
</td>
<td>
1
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
29
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
1
</td>
<td>
0
</td>
<td>
192
</td>
<td>
40
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
6
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
17
</td>
<td>
10
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
57
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Castro Street and El Camino Real
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
30
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
14
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
931
</td>
<td>
34
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
7
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
4
</td>
<td>
12
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</tbody>
</table>
<p>
... (60 rows omitted)
</p>
We can also use `pivot` to find the shortest time of the rides between
Start and End Stations. Here `pivot` has been given `Duration` as the
optional `values` argument, and `min` as the function which to perform
on the values in each cell.

``` {.python}
commute.pivot('Start Station', 'End Station', 'Duration', min)
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
End Station
</th>
<th>
2nd at Folsom
</th>
<th>
2nd at South Park
</th>
<th>
2nd at Townsend
</th>
<th>
5th at Howard
</th>
<th>
Adobe on Almaden
</th>
<th>
Arena Green / SAP Center
</th>
<th>
Beale at Market
</th>
<th>
Broadway St at Battery St
</th>
<th>
California Ave Caltrain Station
</th>
<th>
Castro Street and El Camino Real
</th>
<th>
Civic Center BART (7th at Market)
</th>
<th>
Clay at Battery
</th>
<th>
Commercial at Montgomery
</th>
<th>
Cowper at University
</th>
<th>
Davis at Jackson
</th>
<th>
Embarcadero at Bryant
</th>
<th>
Embarcadero at Folsom
</th>
<th>
Embarcadero at Sansome
</th>
<th>
Embarcadero at Vallejo
</th>
<th>
Evelyn Park and Ride
</th>
<th>
Franklin at Maple
</th>
<th>
Golden Gate at Polk
</th>
<th>
Grant Avenue at Columbus Avenue
</th>
<th>
Harry Bridges Plaza (Ferry Building)
</th>
<th>
Howard at 2nd
</th>
<th>
Japantown
</th>
<th>
MLK Library
</th>
<th>
Market at 10th
</th>
<th>
Market at 4th
</th>
<th>
Market at Sansome
</th>
<th>
Mechanics Plaza (Market at Battery)
</th>
<th>
Mezes Park
</th>
<th>
Mountain View Caltrain Station
</th>
<th>
Mountain View City Hall
</th>
<th>
Palo Alto Caltrain Station
</th>
<th>
Park at Olive
</th>
<th>
Paseo de San Antonio
</th>
<th>
Post at Kearny
</th>
<th>
Powell Street BART
</th>
<th>
Powell at Post (Union Square)
</th>
<th>
Redwood City Caltrain Station
</th>
<th>
Redwood City Medical Center
</th>
<th>
Redwood City Public Library
</th>
<th>
Rengstorff Avenue / California Street
</th>
<th>
Ryland Park
</th>
<th>
SJSU - San Salvador at 9th
</th>
<th>
SJSU 4th at San Carlos
</th>
<th>
San Antonio Caltrain Station
</th>
<th>
San Antonio Shopping Center
</th>
<th>
San Francisco Caltrain (Townsend at 4th)
</th>
<th>
San Francisco Caltrain 2 (330 Townsend)
</th>
<th>
San Francisco City Hall
</th>
<th>
San Jose City Hall
</th>
<th>
San Jose Civic Center
</th>
<th>
San Jose Diridon Caltrain Station
</th>
<th>
San Mateo County Center
</th>
<th>
San Pedro Square
</th>
<th>
San Salvador at 1st
</th>
<th>
Santa Clara County Civic Center
</th>
<th>
Santa Clara at Almaden
</th>
<th>
South Van Ness at Market
</th>
<th>
Spear at Folsom
</th>
<th>
St James Park
</th>
<th>
Stanford in Redwood City
</th>
<th>
Steuart at Market
</th>
<th>
Temporary Transbay Terminal (Howard at Beale)
</th>
<th>
Townsend at 7th
</th>
<th>
University and Emerson
</th>
<th>
Washington at Kearny
</th>
<th>
Yerba Buena Center of the Arts (3rd @ Howard)
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
2nd at Folsom
</td>
<td>
61
</td>
<td>
97
</td>
<td>
164
</td>
<td>
268
</td>
<td>
0
</td>
<td>
0
</td>
<td>
271
</td>
<td>
407
</td>
<td>
0
</td>
<td>
0
</td>
<td>
483
</td>
<td>
329
</td>
<td>
306
</td>
<td>
0
</td>
<td>
494
</td>
<td>
239
</td>
<td>
262
</td>
<td>
687
</td>
<td>
599
</td>
<td>
0
</td>
<td>
0
</td>
<td>
639
</td>
<td>
416
</td>
<td>
282
</td>
<td>
80
</td>
<td>
0
</td>
<td>
0
</td>
<td>
506
</td>
<td>
237
</td>
<td>
167
</td>
<td>
250
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
208
</td>
<td>
264
</td>
<td>
290
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
300
</td>
<td>
303
</td>
<td>
584
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
590
</td>
<td>
208
</td>
<td>
0
</td>
<td>
0
</td>
<td>
318
</td>
<td>
149
</td>
<td>
448
</td>
<td>
0
</td>
<td>
429
</td>
<td>
165
</td>
</tr>
<tr>
<td>
2nd at South Park
</td>
<td>
61
</td>
<td>
60
</td>
<td>
77
</td>
<td>
86
</td>
<td>
0
</td>
<td>
0
</td>
<td>
78
</td>
<td>
345
</td>
<td>
0
</td>
<td>
0
</td>
<td>
290
</td>
<td>
188
</td>
<td>
171
</td>
<td>
0
</td>
<td>
357
</td>
<td>
104
</td>
<td>
81
</td>
<td>
490
</td>
<td>
341
</td>
<td>
0
</td>
<td>
0
</td>
<td>
369
</td>
<td>
278
</td>
<td>
122
</td>
<td>
60
</td>
<td>
0
</td>
<td>
0
</td>
<td>
416
</td>
<td>
142
</td>
<td>
61
</td>
<td>
68
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
60
</td>
<td>
237
</td>
<td>
106
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
63
</td>
<td>
66
</td>
<td>
458
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
399
</td>
<td>
63
</td>
<td>
0
</td>
<td>
0
</td>
<td>
79
</td>
<td>
61
</td>
<td>
78
</td>
<td>
0
</td>
<td>
270
</td>
<td>
96
</td>
</tr>
<tr>
<td>
2nd at Townsend
</td>
<td>
137
</td>
<td>
67
</td>
<td>
60
</td>
<td>
423
</td>
<td>
0
</td>
<td>
0
</td>
<td>
311
</td>
<td>
469
</td>
<td>
0
</td>
<td>
0
</td>
<td>
546
</td>
<td>
520
</td>
<td>
474
</td>
<td>
0
</td>
<td>
436
</td>
<td>
145
</td>
<td>
232
</td>
<td>
509
</td>
<td>
494
</td>
<td>
0
</td>
<td>
0
</td>
<td>
773
</td>
<td>
549
</td>
<td>
325
</td>
<td>
221
</td>
<td>
0
</td>
<td>
0
</td>
<td>
667
</td>
<td>
367
</td>
<td>
265
</td>
<td>
395
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
319
</td>
<td>
455
</td>
<td>
398
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
125
</td>
<td>
133
</td>
<td>
742
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
777
</td>
<td>
241
</td>
<td>
0
</td>
<td>
0
</td>
<td>
291
</td>
<td>
249
</td>
<td>
259
</td>
<td>
0
</td>
<td>
610
</td>
<td>
284
</td>
</tr>
<tr>
<td>
5th at Howard
</td>
<td>
215
</td>
<td>
300
</td>
<td>
384
</td>
<td>
68
</td>
<td>
0
</td>
<td>
0
</td>
<td>
357
</td>
<td>
530
</td>
<td>
0
</td>
<td>
0
</td>
<td>
179
</td>
<td>
412
</td>
<td>
364
</td>
<td>
0
</td>
<td>
543
</td>
<td>
419
</td>
<td>
359
</td>
<td>
695
</td>
<td>
609
</td>
<td>
0
</td>
<td>
0
</td>
<td>
235
</td>
<td>
474
</td>
<td>
453
</td>
<td>
145
</td>
<td>
0
</td>
<td>
0
</td>
<td>
269
</td>
<td>
161
</td>
<td>
250
</td>
<td>
306
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
234
</td>
<td>
89
</td>
<td>
202
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
256
</td>
<td>
221
</td>
<td>
347
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
375
</td>
<td>
402
</td>
<td>
0
</td>
<td>
0
</td>
<td>
455
</td>
<td>
265
</td>
<td>
357
</td>
<td>
0
</td>
<td>
553
</td>
<td>
109
</td>
</tr>
<tr>
<td>
Adobe on Almaden
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
84
</td>
<td>
275
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
701
</td>
<td>
387
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
229
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
441
</td>
<td>
452
</td>
<td>
318
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
309
</td>
<td>
146
</td>
<td>
182
</td>
<td>
0
</td>
<td>
207
</td>
<td>
358
</td>
<td>
876
</td>
<td>
101
</td>
<td>
0
</td>
<td>
0
</td>
<td>
369
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Arena Green / SAP Center
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
305
</td>
<td>
62
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
526
</td>
<td>
546
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
403
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
288
</td>
<td>
875
</td>
<td>
685
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
440
</td>
<td>
420
</td>
<td>
153
</td>
<td>
0
</td>
<td>
166
</td>
<td>
624
</td>
<td>
759
</td>
<td>
116
</td>
<td>
0
</td>
<td>
0
</td>
<td>
301
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Beale at Market
</td>
<td>
219
</td>
<td>
343
</td>
<td>
417
</td>
<td>
387
</td>
<td>
0
</td>
<td>
0
</td>
<td>
60
</td>
<td>
155
</td>
<td>
0
</td>
<td>
0
</td>
<td>
343
</td>
<td>
122
</td>
<td>
153
</td>
<td>
0
</td>
<td>
115
</td>
<td>
216
</td>
<td>
170
</td>
<td>
303
</td>
<td>
198
</td>
<td>
0
</td>
<td>
0
</td>
<td>
437
</td>
<td>
235
</td>
<td>
149
</td>
<td>
204
</td>
<td>
0
</td>
<td>
0
</td>
<td>
535
</td>
<td>
203
</td>
<td>
88
</td>
<td>
72
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
191
</td>
<td>
316
</td>
<td>
191
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
499
</td>
<td>
395
</td>
<td>
526
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
575
</td>
<td>
173
</td>
<td>
0
</td>
<td>
0
</td>
<td>
87
</td>
<td>
94
</td>
<td>
619
</td>
<td>
0
</td>
<td>
222
</td>
<td>
264
</td>
</tr>
<tr>
<td>
Broadway St at Battery St
</td>
<td>
351
</td>
<td>
424
</td>
<td>
499
</td>
<td>
555
</td>
<td>
0
</td>
<td>
0
</td>
<td>
195
</td>
<td>
62
</td>
<td>
0
</td>
<td>
0
</td>
<td>
520
</td>
<td>
90
</td>
<td>
129
</td>
<td>
0
</td>
<td>
70
</td>
<td>
340
</td>
<td>
284
</td>
<td>
128
</td>
<td>
101
</td>
<td>
0
</td>
<td>
0
</td>
<td>
961
</td>
<td>
148
</td>
<td>
168
</td>
<td>
357
</td>
<td>
0
</td>
<td>
0
</td>
<td>
652
</td>
<td>
351
</td>
<td>
218
</td>
<td>
221
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
255
</td>
<td>
376
</td>
<td>
316
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
611
</td>
<td>
599
</td>
<td>
799
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
738
</td>
<td>
336
</td>
<td>
0
</td>
<td>
0
</td>
<td>
169
</td>
<td>
291
</td>
<td>
885
</td>
<td>
0
</td>
<td>
134
</td>
<td>
411
</td>
</tr>
<tr>
<td>
California Ave Caltrain Station
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
82
</td>
<td>
1645
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
628
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
1771
</td>
<td>
0
</td>
<td>
484
</td>
<td>
131
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
1077
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
870
</td>
<td>
911
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
531
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
Castro Street and El Camino Real
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
74
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
499
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
201
</td>
<td>
108
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
654
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
953
</td>
<td>
696
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</tbody>
</table>
<p>
... (60 rows omitted)
</p>
Someone had a quick trip (271 seconds, or about 4.5 minutes) from
2nd at Folsom to Beale at Market, about five blocks away. There are no
bike trips between the 2nd Avenue stations and Adobe on Almaden, because
the latter is in a different city.

### Drawing Maps

The table `stations` contains geographical information about each bike
station, including latitude, longitude, and a "landmark", which is the
name of the city where the station is located.

``` {.python}
stations = Table.read_table(path_data + 'station.csv')
stations
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
station\_id
</th>
<th>
name
</th>
<th>
lat
</th>
<th>
long
</th>
<th>
dockcount
</th>
<th>
landmark
</th>
<th>
installation
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
2
</td>
<td>
San Jose Diridon Caltrain Station
</td>
<td>
37.3297
</td>
<td>
-121.902
</td>
<td>
27
</td>
<td>
San Jose
</td>
<td>
8/6/2013
</td>
</tr>
<tr>
<td>
3
</td>
<td>
San Jose Civic Center
</td>
<td>
37.3307
</td>
<td>
-121.889
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
</tr>
<tr>
<td>
4
</td>
<td>
Santa Clara at Almaden
</td>
<td>
37.334
</td>
<td>
-121.895
</td>
<td>
11
</td>
<td>
San Jose
</td>
<td>
8/6/2013
</td>
</tr>
<tr>
<td>
5
</td>
<td>
Adobe on Almaden
</td>
<td>
37.3314
</td>
<td>
-121.893
</td>
<td>
19
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
</tr>
<tr>
<td>
6
</td>
<td>
San Pedro Square
</td>
<td>
37.3367
</td>
<td>
-121.894
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/7/2013
</td>
</tr>
<tr>
<td>
7
</td>
<td>
Paseo de San Antonio
</td>
<td>
37.3338
</td>
<td>
-121.887
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/7/2013
</td>
</tr>
<tr>
<td>
8
</td>
<td>
San Salvador at 1st
</td>
<td>
37.3302
</td>
<td>
-121.886
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
</tr>
<tr>
<td>
9
</td>
<td>
Japantown
</td>
<td>
37.3487
</td>
<td>
-121.895
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
</tr>
<tr>
<td>
10
</td>
<td>
San Jose City Hall
</td>
<td>
37.3374
</td>
<td>
-121.887
</td>
<td>
15
</td>
<td>
San Jose
</td>
<td>
8/6/2013
</td>
</tr>
<tr>
<td>
11
</td>
<td>
MLK Library
</td>
<td>
37.3359
</td>
<td>
-121.886
</td>
<td>
19
</td>
<td>
San Jose
</td>
<td>
8/6/2013
</td>
</tr>
</tbody>
</table>
<p>
... (60 rows omitted)
</p>
We can draw a map of where the stations are located, using
`Marker.map_table`. The function operates on a table, whose columns are
(in order) latitude, longitude, and an optional identifier for each
point.

> [!NOTE]
> The images below are static images from interactive folium maps. You may view these maps interactively by opening the corresponding notebook **bike-sharing-in-the-bay-area.ipynb** in your Visual Studio Codespace environment.

``` {.python}
Marker.map_table(stations.select('lat', 'long', 'name'))
```

![png](../media/folium-1.PNG)

The map is created using
[OpenStreetMap](http://www.openstreetmap.org/#map=5/51.500/-0.100),
which is an open online mapping system that you can use just as you
would use Google Maps or any other online map. Zoom in to San Francisco
to see how the stations are distributed. Click on a marker to see which
station it is.

You can also represent points on a map by colored circles. Here is such
a map of the San Francisco bike stations.

``` {.python}
sf = stations.where('landmark', are.equal_to('San Francisco'))
sf_map_data = sf.select('lat', 'long', 'name')
Circle.map_table(sf_map_data, color='green', radius=200)
```

![png](../media/folium-2.PNG)

### More Informative Maps: An Application of `join`

The bike stations are located in five different cities in the Bay Area.
To distinguish the points by using a different color for each city,
let's start by using group to identify all the cities and assign each
one a color.

``` {.python}
cities = stations.group('landmark').relabeled('landmark', 'city')
cities
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
city
</th>
<th>
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Mountain View
</td>
<td>
7
</td>
</tr>
<tr>
<td>
Palo Alto
</td>
<td>
5
</td>
</tr>
<tr>
<td>
Redwood City
</td>
<td>
7
</td>
</tr>
<tr>
<td>
San Francisco
</td>
<td>
35
</td>
</tr>
<tr>
<td>
San Jose
</td>
<td>
16
</td>
</tr>
</tbody>
</table>
``` {.python}
colors = cities.with_column('color', make_array('blue', 'red', 'green', 'orange', 'purple'))
colors
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
city
</th>
<th>
count
</th>
<th>
color
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Mountain View
</td>
<td>
7
</td>
<td>
blue
</td>
</tr>
<tr>
<td>
Palo Alto
</td>
<td>
5
</td>
<td>
red
</td>
</tr>
<tr>
<td>
Redwood City
</td>
<td>
7
</td>
<td>
green
</td>
</tr>
<tr>
<td>
San Francisco
</td>
<td>
35
</td>
<td>
orange
</td>
</tr>
<tr>
<td>
San Jose
</td>
<td>
16
</td>
<td>
purple
</td>
</tr>
</tbody>
</table>
Now we can join `stations` and `colors` by `landmark`, and then select
the columns we need to draw a map.

``` {.python}
joined = stations.join('landmark', colors, 'city')
colored = joined.select('lat', 'long', 'name', 'color')
Marker.map_table(colored)
```

![png](../media/folium-3.PNG)

Now the markers have five different colors for the five different
cities.

To see where most of the bike rentals originate, let's identify the
start stations:

``` {.python}
starts = commute.group('Start Station').sort('count', descending=True)
starts
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
Start Station
</th>
<th>
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
San Francisco Caltrain (Townsend at 4th)
</td>
<td>
25858
</td>
</tr>
<tr>
<td>
San Francisco Caltrain 2 (330 Townsend)
</td>
<td>
21523
</td>
</tr>
<tr>
<td>
Harry Bridges Plaza (Ferry Building)
</td>
<td>
15543
</td>
</tr>
<tr>
<td>
Temporary Transbay Terminal (Howard at Beale)
</td>
<td>
14298
</td>
</tr>
<tr>
<td>
2nd at Townsend
</td>
<td>
13674
</td>
</tr>
<tr>
<td>
Townsend at 7th
</td>
<td>
13579
</td>
</tr>
<tr>
<td>
Steuart at Market
</td>
<td>
13215
</td>
</tr>
<tr>
<td>
Embarcadero at Sansome
</td>
<td>
12842
</td>
</tr>
<tr>
<td>
Market at 10th
</td>
<td>
11523
</td>
</tr>
<tr>
<td>
Market at Sansome
</td>
<td>
11023
</td>
</tr>
</tbody>
</table>
<p>
... (60 rows omitted)
</p>
We can include the geographical data needed to map these stations, by
first joining `starts` with `stations`:

``` {.python}
station_starts = stations.join('name', starts, 'Start Station')
station_starts
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
name
</th>
<th>
station\_id
</th>
<th>
lat
</th>
<th>
long
</th>
<th>
dockcount
</th>
<th>
landmark
</th>
<th>
installation
</th>
<th>
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
2nd at Folsom
</td>
<td>
62
</td>
<td>
37.7853
</td>
<td>
-122.396
</td>
<td>
19
</td>
<td>
San Francisco
</td>
<td>
8/22/2013
</td>
<td>
7841
</td>
</tr>
<tr>
<td>
2nd at South Park
</td>
<td>
64
</td>
<td>
37.7823
</td>
<td>
-122.393
</td>
<td>
15
</td>
<td>
San Francisco
</td>
<td>
8/22/2013
</td>
<td>
9274
</td>
</tr>
<tr>
<td>
2nd at Townsend
</td>
<td>
61
</td>
<td>
37.7805
</td>
<td>
-122.39
</td>
<td>
27
</td>
<td>
San Francisco
</td>
<td>
8/22/2013
</td>
<td>
13674
</td>
</tr>
<tr>
<td>
5th at Howard
</td>
<td>
57
</td>
<td>
37.7818
</td>
<td>
-122.405
</td>
<td>
15
</td>
<td>
San Francisco
</td>
<td>
8/21/2013
</td>
<td>
7394
</td>
</tr>
<tr>
<td>
Adobe on Almaden
</td>
<td>
5
</td>
<td>
37.3314
</td>
<td>
-121.893
</td>
<td>
19
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
<td>
522
</td>
</tr>
<tr>
<td>
Arena Green / SAP Center
</td>
<td>
14
</td>
<td>
37.3327
</td>
<td>
-121.9
</td>
<td>
19
</td>
<td>
San Jose
</td>
<td>
8/5/2013
</td>
<td>
590
</td>
</tr>
<tr>
<td>
Beale at Market
</td>
<td>
56
</td>
<td>
37.7923
</td>
<td>
-122.397
</td>
<td>
19
</td>
<td>
San Francisco
</td>
<td>
8/20/2013
</td>
<td>
8135
</td>
</tr>
<tr>
<td>
Broadway St at Battery St
</td>
<td>
82
</td>
<td>
37.7985
</td>
<td>
-122.401
</td>
<td>
15
</td>
<td>
San Francisco
</td>
<td>
1/22/2014
</td>
<td>
7460
</td>
</tr>
<tr>
<td>
California Ave Caltrain Station
</td>
<td>
36
</td>
<td>
37.4291
</td>
<td>
-122.143
</td>
<td>
15
</td>
<td>
Palo Alto
</td>
<td>
8/14/2013
</td>
<td>
300
</td>
</tr>
<tr>
<td>
Castro Street and El Camino Real
</td>
<td>
32
</td>
<td>
37.386
</td>
<td>
-122.084
</td>
<td>
11
</td>
<td>
Mountain View
</td>
<td>
12/31/2013
</td>
<td>
1137
</td>
</tr>
</tbody>
</table>
<p>
... (58 rows omitted)
</p>
Now we extract just the data needed for drawing our map, adding a color
and an area to each station. The area is 1000 times the count of the
number of rentals starting at each station, where the constant 1000 was
chosen so that the circles would appear at an appropriate scale on the
map.

``` {.python}
starts_map_data = station_starts.select('lat', 'long', 'name').with_columns(
    'color', 'blue',
    'area', station_starts.column('count') * 1000
)
starts_map_data.show(3)
Circle.map_table(starts_map_data)
```

<table border="1" class="dataframe">
<thead>
<tr>
<th>
lat
</th>
<th>
long
</th>
<th>
name
</th>
<th>
color
</th>
<th>
area
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
37.7853
</td>
<td>
-122.396
</td>
<td>
2nd at Folsom
</td>
<td>
blue
</td>
<td>
7841000
</td>
</tr>
<tr>
<td>
37.7823
</td>
<td>
-122.393
</td>
<td>
2nd at South Park
</td>
<td>
blue
</td>
<td>
9274000
</td>
</tr>
<tr>
<td>
37.7805
</td>
<td>
-122.39
</td>
<td>
2nd at Townsend
</td>
<td>
blue
</td>
<td>
13674000
</td>
</tr>
</tbody>
</table>
<p>
... (65 rows omitted)
</p>

![png](../media/folium-4.PNG)

That huge blob in San Francisco shows that the eastern section of the
city is the unrivaled capital of bike rentals in the Bay Area.
