Deployments to devices need to be done under tight control in production environments. To achieve this, you'll create a release pipeline which deploys to QA devices and smoke tests the edge runtime in a containerized device. This is accomplished by running an instance of the [azure-iot-edge-device-container](https://github.com/toolboc/azure-iot-edge-device-container) which is configured as a QA device then probing the IoT Hub to ensure that QA device receives the desired deployment configuration and is able to successfully run all configured modules. This test is contained in [edgeSmokeTest.sh](https://github.com/MicrosoftDocs/mslearn-oxford-implement-cicd-iot-edge/blob/master/scripts/edgeSmokeTest.sh).

Once you have created a release, you need to add a scalable integration test to the release pipeline. Integration testing is vital for IoT Edge solutions that rely on services to accomplish desired functionality. You'll set up a scalable deployment of QA Devices using an Azure Kubernetes cluster. You'll monitor these devices using the dockerappinsights module, which is configured in deployment.template.json. Completion of this step will require the configuration of an Azure Kubernetes Service.

You begin by creating an Azure Kubernetes Service cluster in the Azure portal. Once you have completed this step, head back to the release pipeline and add a new stage after the "Smoke Test" based on "Deploy an application to a Kubernetes cluster by using its Helm chart" template. In Kubernetes, Helm helps you manage Kubernetes applications. Helm Charts help you define, install, and upgrade the Kubernetes application.
