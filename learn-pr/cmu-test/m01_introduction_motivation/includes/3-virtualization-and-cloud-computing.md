<!-- Original file: C:\Users\Mark\Desktop\CMU\v_5_3\content\_u03_virtualizing_resources_for_cloud\_u03_m01_introduction_motivation\x-oli-workbook_page\_u03_m01_1_intro_2.xml -->
##  Why Virtualization?
Virtualization is predominantly used by programmers to ease software development and testing. It is used by IT data centers to consolidate dedicated servers into more cost effective hardware and by the cloud (e.g., Amazon EC2) to isolate users sharing a single hardware layer and offer elasticity, among other features. Next, we discuss six areas that virtualization enables on the cloud.

![Figure 3.1: Provisioning a VM on a physical system.](..\media\provisioning_VM.png)
_Figure 3.1: Provisioning a VM on a physical system._


1. _Enabling the cloud computing system model:_ A major use case of virtualization is cloud computing. As discussed in Unit 1, cloud computing adopts a model whereby software, computation, and storage are offered as services. These services range from arbitrary applications (called software as a service, or SaaS) such as Google Apps through platforms (called platform as a service, or PaaS) such as Google App Engine to physical infrastructures (called infrastructure as a service, or IaaS) such as Amazon EC2. For example, IaaS allows cloud users to provision VMs for their own use. As shown in Figure 3.1, provisioning a VM entails obtaining virtual versions of every physical machine component, including CPU, memory, I/O, and storage. Virtualization makes this possible via a virtualization intermediary called the hypervisor or the virtual machine monitor (VMM). Examples of leading hypervisors are Xen and VMware. Amazon EC2 uses Xen for provisioning VMs to users.
1. _Elasticity:_ A major property of the cloud is elasticity, or the ability to respond quickly to user demands by including or excluding resources either manually or automatically. This applies to all the cloud platforms,i.e., for SaaS, PaaS, and IaaS. As shown in Figure 3.1, virtualization enhances elasticity by allowing providers/users to increase or decrease services on the cloud. For instance, Google App Engine automatically expands servers during demand spikes and contracts them during demand lulls. On the other hand, Amazon EC2 allows users to expand and contract their own virtual clusters either manually (by default) or automatically (by using Amazon Auto Scaling). In short, virtualization is the key technology needed for <!-- SCG: I would prefer "in the cloud" --> elasticity on the cloud.
1. _Resource sandboxing:_ A system VM provides a sandbox that can isolate one environment from others, ensuring a level of security that may not be applicable with conventional operating systems (OSs). First, a user running an application on a private machine might be reluctant to move her applications to the cloud unless guarantees are provided that her applications and activities cannot be accessed and monitored by any other user on the cloud. Virtualization is an important part in creating a safe environment for every user by making it impossible for one user to observe or alter the data or activity of another user. Second, because the cloud can also execute user applications concurrently, a software failure of one application cannot generally propagate to others, if all are running on different VMs. Such a property is usually called _fault containment_. Clearly, this protection increases the robustness of the system. In a nonvirtualized environment, however, erratic behavior of one application can bring down the whole system. ![Figure 3.2: Using virtual sandboxes to develop defenses against attacks and to monitor incoming data.](..\media\attacks_cloning_with_virtualSandboxes.png)
_Figure 3.2: Using virtual sandboxes to develop defenses against attacks and to monitor incoming data._

Sandboxing, as provided by virtualization, opens up interesting possibilities as well. As illustrated in Figure 3.2, a specific VM can be used as a sandbox whereby security attacks (e.g., denial-of-service attacks and inserting a malicious packet into a legitimate IP communication stream) can be safely permitted and monitored. This allows one to inspect the effects of such attacks, gathering information on their specific behaviors, and replaying them if necessary to design a defense against future attacks (by learning how to detect and quarantine them before they can cause any harm). Furthermore, suspicious network packets or input can be sent to a clone (a specific VM) before it is forwarded to the intended VM to preclude any potential ill effect. A VM can be thrown away after it has served its purpose.


1. _Improved system utilization and reduced costs and energy consumption:_ It is well known that computer hardware resources are often underutilized. The concept of resource sharing has been successfully applied in multiprogramming OSs to improve system utilization. Resource sharing in multiprogramming OSs is based on the process abstraction. Virtualization takes this a step forward by creating an illusion of a complete system whereby multiple VMs can be supported simultaneously, each running its own system image (e.g., OS) and associated applications. For instance, in virtualized data centers (e.g., Amazon EC2), seven or more VMs can be provisioned on a single server, providing resource utilization of approximately 60% to 80%. In contrast, approximately only 5% to 10% average resource utilization is accomplished in nonvirtualized data centers. By enabling multiple VMs on a single physical server, virtualization allows consolidating physical servers into <!-- SCG: Isn't this the other way around? --> virtual servers that run on many fewer physical servers (a concept called _server consolidation_). Clearly, this consolidation can lead not only to improved system utilization but to reduced costs.

Server consolidation as provided by virtualization leads not only to improved system utilization and reduced costs but to optimized energy consumption in cloud data centers. Data centers hosting cloud applications consume tremendous amounts of energy, resulting in high operational costs and carbon dioxide emissions. Server consolidation is considered an effective way to improve the energy efficiency of data centers by consolidating applications running on multiple physical <!-- SCG: Isn't this the other way around? --> servers into fewer virtual servers. Idle physical servers can subsequently be switched off to decrease energy consumption. Studies show that server consolidation can save up to 20% of data center energy consumption. A large body of research work illustrates the promise of virtualization in reducing energy consumption in cloud data centers. Indeed, mitigating the explosive energy consumption of cloud data centers is currently deemed as one of the key challenges in cloud computing.


1. _Mixed-OS environment:_ As shown in Figure 3.3 and pointed out in the previous subsection, a single hardware platform can support multiple OSs simultaneously. This provides great flexibility for users, i.e., they can install their own OSs, libraries, and applications. For instance, a user can install one OS for office productivity tools and another OS for application development and testing, all on a single desktop computer or on the cloud (e.g., Amazon EC2).![Figure 3.3: Mixed-OS environment offered by system virtualization.](..\media\Mixed-OS.png)
_Figure 3.3: Mixed-OS environment offered by system virtualization._


1. _Facilitating research:_ Running an OS on a VM allows the hypervisor to instrument accesses to hardware resources and count specific event types (e.g., page faults) or even log detailed information about the nature and origin of each event and then record how each operation is satisfied. Moreover, traces of executions and dumps of machine states at points of interests can be taken at the VM level, an action that cannot be performed on native systems. Last, system execution can be replayed on VMs from some saved state for analyzing system behavior under various scenarios. Indeed, the complete state of a VM can be saved, cloned, encrypted, moved, and/or restored; actions that are not so easy to perform with physical machines. As such, it has become common for OS researchers to conduct most of their experiments using VMs rather than native hardware platforms.